{"ast":null,"code":"import { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { mimeType } from \"./mime-type.validator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../post.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/button\";\n\nfunction PostEditComponent_mat_error_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Please enter title\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostEditComponent_mat_error_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Please enter content\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PostEditComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r3.imagePreview, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r3.postForm.value.title);\n  }\n}\n\nexport class PostEditComponent {\n  constructor(postsService, route) {\n    this.postsService = postsService;\n    this.route = route;\n    this.enteredTitle = \"\";\n    this.enteredContent = \"\";\n    this.mode = \"create\";\n    this.isLoading = false;\n  }\n\n  ngOnInit() {\n    this.route.paramMap.subscribe(paramMap => {\n      if (paramMap.has(\"postId\")) {\n        this.mode = \"edit\";\n        this.postId = paramMap.get(\"postId\");\n        this.postsService.getPost(this.postId).subscribe(postData => {\n          this.isLoading = false;\n          this.post = {\n            id: postData._id,\n            title: postData.title,\n            content: postData.content,\n            imagePath: '',\n            creator: null\n          };\n          console.log(this.post); // this.form.setValue({\n          //   title: this.post.title,\n          //   content: this.post.content,\n          //   imagePath: this.post.imagePath\n          // });\n        });\n      } else {\n        this.mode = \"create\";\n        this.postId = null;\n      }\n    });\n    this.postForm = new FormGroup({\n      title: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(3)]\n      }),\n      content: new FormControl(null, {\n        validators: [Validators.required]\n      }),\n      image: new FormControl(null, {\n        validators: [Validators.required],\n        asyncValidators: [mimeType]\n      })\n    });\n  }\n\n  onSavePost() {\n    if (this.postForm.invalid) {\n      return;\n    }\n\n    this.postsService.updatePost(this.postId, this.postForm.value.title, this.postForm.value.content, this.postForm.value.image);\n    this.postForm.reset();\n  }\n\n  onImagePicked(event) {\n    const file = event.target.files[0];\n    this.postForm.patchValue({\n      image: file\n    });\n    this.postForm.get('image').updateValueAndValidity();\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      this.imagePreview = reader.result;\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n}\n\nPostEditComponent.ɵfac = function PostEditComponent_Factory(t) {\n  return new (t || PostEditComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\n\nPostEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostEditComponent,\n  selectors: [[\"app-post-edit\"]],\n  decls: 20,\n  vars: 6,\n  consts: [[3, \"formGroup\", \"submit\"], [\"type\", \"text\", \"formControlName\", \"title\", \"matInput\", \"\", \"placeholder\", \"Enter title\", 3, \"ngModel\"], [4, \"ngIf\"], [\"type\", \"content\", \"formControlName\", \"content\", \"matInput\", \"\", \"placeholder\", \"Enter content\", 3, \"ngModel\"], [\"id\", \"imageUpload\"], [\"mat-stroked-button\", \"\", \"type\", \"submit\", 3, \"click\"], [\"type\", \"file\", 3, \"change\"], [\"filePicker\", \"\"], [\"class\", \"image-preview\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\"], [1, \"image-preview\"], [3, \"src\", \"alt\"]],\n  template: function PostEditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r4 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"mat-card\")(1, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function PostEditComponent_Template_form_submit_1_listener() {\n        return ctx.onSavePost();\n      });\n      i0.ɵɵelementStart(2, \"mat-form-field\");\n      i0.ɵɵelement(3, \"input\", 1);\n      i0.ɵɵtemplate(4, PostEditComponent_mat_error_4_Template, 2, 0, \"mat-error\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"br\");\n      i0.ɵɵelementStart(6, \"mat-form-field\");\n      i0.ɵɵelement(7, \"input\", 3);\n      i0.ɵɵtemplate(8, PostEditComponent_mat_error_8_Template, 2, 0, \"mat-error\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"br\");\n      i0.ɵɵelementStart(10, \"div\", 4)(11, \"p\");\n      i0.ɵɵtext(12, \"Image Upload\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function PostEditComponent_Template_button_click_13_listener() {\n        i0.ɵɵrestoreView(_r4);\n\n        const _r2 = i0.ɵɵreference(16);\n\n        return _r2.click();\n      });\n      i0.ɵɵtext(14, \"pickfile\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 6, 7);\n      i0.ɵɵlistener(\"change\", function PostEditComponent_Template_input_change_15_listener($event) {\n        return ctx.onImagePicked($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(17, PostEditComponent_div_17_Template, 2, 2, \"div\", 8);\n      i0.ɵɵelementStart(18, \"button\", 9);\n      i0.ɵɵtext(19, \"Save post\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.postForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.post.title);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.postForm.get(\"title\").invalid);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.post.content);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.postForm.get(\"content\").invalid);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.imagePreview !== \"\" && ctx.imagePreview);\n    }\n  },\n  directives: [i3.MatCard, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i5.MatFormField, i4.DefaultValueAccessor, i6.MatInput, i4.NgControlStatus, i4.FormControlName, i7.NgIf, i5.MatError, i8.MatButton],\n  styles: [\"input[type='file'][_ngcontent-%COMP%]\\n{\\n    visibility: hidden;\\n}\\n#imageUpload[_ngcontent-%COMP%]{\\n    padding-right: 20px;\\n}\\n#imageUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\\ncolor: tomato;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtZWRpdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztJQUVJLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksbUJBQW1CO0FBQ3ZCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IiLCJmaWxlIjoicG9zdC1lZGl0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpbnB1dFt0eXBlPSdmaWxlJ11cbntcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG59XG4jaW1hZ2VVcGxvYWR7XG4gICAgcGFkZGluZy1yaWdodDogMjBweDtcbn1cbiNpbWFnZVVwbG9hZCBwe1xuY29sb3I6IHRvbWF0bztcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["/var/www/html/Skill/mean/node_angular/frontend/src/app/post/post-edit/post-edit.component.ts"],"names":["FormGroup","FormControl","Validators","mimeType","i0","i1","i2","i3","i4","i5","i6","i7","i8","PostEditComponent_mat_error_4_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","PostEditComponent_mat_error_8_Template","PostEditComponent_div_17_Template","ɵɵelement","ctx_r3","ɵɵnextContext","ɵɵadvance","ɵɵproperty","imagePreview","ɵɵsanitizeUrl","postForm","value","title","PostEditComponent","constructor","postsService","route","enteredTitle","enteredContent","mode","isLoading","ngOnInit","paramMap","subscribe","has","postId","get","getPost","postData","post","id","_id","content","imagePath","creator","console","log","validators","required","minLength","image","asyncValidators","onSavePost","invalid","updatePost","reset","onImagePicked","event","file","target","files","patchValue","updateValueAndValidity","reader","FileReader","onload","result","readAsDataURL","ɵfac","PostEditComponent_Factory","t","ɵɵdirectiveInject","PostService","ActivatedRoute","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PostEditComponent_Template","_r4","ɵɵgetCurrentView","ɵɵlistener","PostEditComponent_Template_form_submit_1_listener","ɵɵtemplate","PostEditComponent_Template_button_click_13_listener","ɵɵrestoreView","_r2","ɵɵreference","click","PostEditComponent_Template_input_change_15_listener","$event","directives","MatCard","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","MatFormField","DefaultValueAccessor","MatInput","NgControlStatus","FormControlName","NgIf","MatError","MatButton","styles"],"mappings":"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","sourcesContent":["import { FormGroup, FormControl, Validators } from \"@angular/forms\";\nimport { mimeType } from \"./mime-type.validator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../post.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/button\";\nfunction PostEditComponent_mat_error_4_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Please enter title\");\n    i0.ɵɵelementEnd();\n} }\nfunction PostEditComponent_mat_error_8_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"Please enter content\");\n    i0.ɵɵelementEnd();\n} }\nfunction PostEditComponent_div_17_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r3.imagePreview, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r3.postForm.value.title);\n} }\nexport class PostEditComponent {\n    constructor(postsService, route) {\n        this.postsService = postsService;\n        this.route = route;\n        this.enteredTitle = \"\";\n        this.enteredContent = \"\";\n        this.mode = \"create\";\n        this.isLoading = false;\n    }\n    ngOnInit() {\n        this.route.paramMap.subscribe((paramMap) => {\n            if (paramMap.has(\"postId\")) {\n                this.mode = \"edit\";\n                this.postId = paramMap.get(\"postId\");\n                this.postsService.getPost(this.postId).subscribe(postData => {\n                    this.isLoading = false;\n                    this.post = { id: postData._id, title: postData.title, content: postData.content, imagePath: '', creator: null };\n                    console.log(this.post);\n                    // this.form.setValue({\n                    //   title: this.post.title,\n                    //   content: this.post.content,\n                    //   imagePath: this.post.imagePath\n                    // });\n                });\n            }\n            else {\n                this.mode = \"create\";\n                this.postId = null;\n            }\n        });\n        this.postForm = new FormGroup({\n            title: new FormControl(null, {\n                validators: [Validators.required, Validators.minLength(3)]\n            }),\n            content: new FormControl(null, { validators: [Validators.required] }),\n            image: new FormControl(null, { validators: [Validators.required], asyncValidators: [mimeType] })\n        });\n    }\n    onSavePost() {\n        if (this.postForm.invalid) {\n            return;\n        }\n        this.postsService.updatePost(this.postId, this.postForm.value.title, this.postForm.value.content, this.postForm.value.image);\n        this.postForm.reset();\n    }\n    onImagePicked(event) {\n        const file = event.target.files[0];\n        this.postForm.patchValue({ image: file });\n        this.postForm.get('image').updateValueAndValidity();\n        const reader = new FileReader();\n        reader.onload = () => {\n            this.imagePreview = reader.result;\n        };\n        reader.readAsDataURL(file);\n    }\n}\nPostEditComponent.ɵfac = function PostEditComponent_Factory(t) { return new (t || PostEditComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.ActivatedRoute)); };\nPostEditComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PostEditComponent, selectors: [[\"app-post-edit\"]], decls: 20, vars: 6, consts: [[3, \"formGroup\", \"submit\"], [\"type\", \"text\", \"formControlName\", \"title\", \"matInput\", \"\", \"placeholder\", \"Enter title\", 3, \"ngModel\"], [4, \"ngIf\"], [\"type\", \"content\", \"formControlName\", \"content\", \"matInput\", \"\", \"placeholder\", \"Enter content\", 3, \"ngModel\"], [\"id\", \"imageUpload\"], [\"mat-stroked-button\", \"\", \"type\", \"submit\", 3, \"click\"], [\"type\", \"file\", 3, \"change\"], [\"filePicker\", \"\"], [\"class\", \"image-preview\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\"], [1, \"image-preview\"], [3, \"src\", \"alt\"]], template: function PostEditComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r4 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"mat-card\")(1, \"form\", 0);\n        i0.ɵɵlistener(\"submit\", function PostEditComponent_Template_form_submit_1_listener() { return ctx.onSavePost(); });\n        i0.ɵɵelementStart(2, \"mat-form-field\");\n        i0.ɵɵelement(3, \"input\", 1);\n        i0.ɵɵtemplate(4, PostEditComponent_mat_error_4_Template, 2, 0, \"mat-error\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelementStart(6, \"mat-form-field\");\n        i0.ɵɵelement(7, \"input\", 3);\n        i0.ɵɵtemplate(8, PostEditComponent_mat_error_8_Template, 2, 0, \"mat-error\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"br\");\n        i0.ɵɵelementStart(10, \"div\", 4)(11, \"p\");\n        i0.ɵɵtext(12, \"Image Upload\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function PostEditComponent_Template_button_click_13_listener() { i0.ɵɵrestoreView(_r4); const _r2 = i0.ɵɵreference(16); return _r2.click(); });\n        i0.ɵɵtext(14, \"pickfile\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"input\", 6, 7);\n        i0.ɵɵlistener(\"change\", function PostEditComponent_Template_input_change_15_listener($event) { return ctx.onImagePicked($event); });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(17, PostEditComponent_div_17_Template, 2, 2, \"div\", 8);\n        i0.ɵɵelementStart(18, \"button\", 9);\n        i0.ɵɵtext(19, \"Save post\");\n        i0.ɵɵelementEnd()()();\n    } if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.postForm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.post.title);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.postForm.get(\"title\").invalid);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.post.content);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.postForm.get(\"content\").invalid);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.imagePreview !== \"\" && ctx.imagePreview);\n    } }, directives: [i3.MatCard, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i5.MatFormField, i4.DefaultValueAccessor, i6.MatInput, i4.NgControlStatus, i4.FormControlName, i7.NgIf, i5.MatError, i8.MatButton], styles: [\"input[type='file'][_ngcontent-%COMP%]\\n{\\n    visibility: hidden;\\n}\\n#imageUpload[_ngcontent-%COMP%]{\\n    padding-right: 20px;\\n}\\n#imageUpload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\\ncolor: tomato;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QtZWRpdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztJQUVJLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksbUJBQW1CO0FBQ3ZCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IiLCJmaWxlIjoicG9zdC1lZGl0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpbnB1dFt0eXBlPSdmaWxlJ11cbntcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG59XG4jaW1hZ2VVcGxvYWR7XG4gICAgcGFkZGluZy1yaWdodDogMjBweDtcbn1cbiNpbWFnZVVwbG9hZCBwe1xuY29sb3I6IHRvbWF0bztcbn0iXX0= */\"] });\n"]},"metadata":{},"sourceType":"module"}